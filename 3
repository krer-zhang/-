#include<stdio.h>
#include<stdlib.h>
void main()
{
        FILE *fp;
        double stu_ID,ID,l=0;
        char stu_name[10],name[5][10];
        int stu_math,stu_chi,stu_eng,i,k=0;
        int score_all,score_ave;
        int math,chi,eng,all,ave;
        if((fp=fopen("实验三_3.dat","w"))==NULL)
        {
                printf("无法打开此文件\n");
                exit(0);
        }
        printf("请输入学生信息:\n");
        scanf("%lf",&stu_ID);
        while(l!=-1)
        {

                scanf(" %s %d %d %d",stu_name,&stu_math,&stu_chi,&stu_eng);

                fprintf(fp,"%.0lf      %s      %d       %d      %d\n",stu_ID,stu_name,stu_math,stu_chi,stu_eng);

                scanf("%lf",&stu_ID);
                l=stu_ID;
                k++;
        }
        fclose(fp);
        rewind(fp);
        if((fp=fopen("实验三_3.dat","r"))==NULL)
        {
                printf("无法打开此文件\n");
                exit(0);
        }
        printf("\n\n\n********************************************\n");
        for(i=0;i<k;i++)
        {
               fscanf(fp,"%lf       %s       %d      %d      %d",&ID,name[10],&math,&chi,&eng);
                printf("%.0lf      %s        %d      %d      %d     %d    %d\n",ID,name[10],math,chi,eng,math+chi+eng,(math+chi+eng)/3);
        }
        fclose(fp);

}

